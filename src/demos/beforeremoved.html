<!DOCTYPE html>
<title>can-stache-animate - demo</title>
<style>
body{
	background-color:#f0f0f0;
}
.demo-wrap{
	position: relative;
	top:1em;
	height:200px;
	width: 200px;
	margin: .5em;
	display:inline-block;
}

.demo{
	position: absolute;
	width:100%;
	height: 100%;
	top:0;
	left:0;
	background-color: #cb3034;
}
.hidden{
	display: none;
}

</style>

<script type="text/stache" id="demo-stache">
		<can-import 
			from="can-stache-animate/demos/beforeremoved-animations" 
			{^value.animations}="*animations" 
		/>
	<h2>beforeremoved</h2>
	<div class="demo-wrap">
		{{#if showDemo}}
		<div class="demo"
				 ($beforeremoved)="*animations.customFadeOut" />
		{{/if}}
	</div>

	<br />
	<h2>beforeremoved - with cancel</h2>
	<div class="demo-wrap">
		{{#if showDemo}}
		<div class="demo cancel"
				 ($beforeremoved)="*animations.customFadeOut">
				 This one will be cancelled in beforeremoved
		</div>
		{{/if}}
	</div>

	<br />
	<h2>beforeremoved and beforedetached - removed only called once</h2>
	<div class="demo-wrap">
		{{#if showDemo}}
		<div class="demo"
				 ($beforeremoved)="*animations.customFadeOut2"
				 ($beforedetached)="*animations.customFadeOut3">
		</div>
		{{/if}}
	</div>

	<br />
	<h2>beforeremoved - list item removal - helper root element</h2>
	{{#each demoListItems}}
		<div class="demo-wrap" ($beforeremoved)="*animations.customFadeOut">
			<div class="demo">
			{{title}}
			</div>
		</div>
	{{/each}}

	<h2>beforedetached - list item removal - helper child element</h2>
	{{#each demoListItems2}}
		<div class="demo-wrap">
			<div class="demo" ($beforedetached)="*animations.customFadeOut">
			  {{title}}
			</div>
		</div>
	{{/each}}

</script>
<script src="../../node_modules/steal/steal.js" main="@empty">
	import $ from 'jquery';
	import 'can-view-import';
	import stache from 'can-stache';
	import canStacheBindings from 'can-stache-bindings';
	import DefineMap from 'can-define/map/';
	import DefineList from 'can-define/list/';

	var TestMap = DefineMap.extend({
				demoListItems: {
					Type: DefineList,
					value: [{
						"title": "hello"
					},{
						"title": "world"
					}]
				},
				demoListItems2: {
					Type: DefineList,
					value: [{
						"title": "hello"
					},{
						"title": "world"
					}]
				},
				showDemo: {
					type: "boolean",
					value: true
				}
			}),
			map = new TestMap({}),
			frag = stache.from("demo-stache")(map);

	document.body.appendChild(frag);
	setTimeout(() => {
		map.showDemo = false;

		map.demoListItems.splice(1,1, {"title": "yo"});
		map.demoListItems2.splice(0,1);
	}, 2000)


</script>
