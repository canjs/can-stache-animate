<!DOCTYPE html>
<title>can-stache-animate - demo</title>
<style>
body{
	background-color:#f0f0f0;
}
.demo-wrap{
	position: relative;
	top:1em;
	height:200px;
	width: 200px;
	margin: .5em auto;
}

.demo{
	position: absolute;
	width:100%;
	height: 100%;
	top:0;
	left:0;
	background-color: #cb3034;
}
.hidden{
	display: none;
}

</style>

<script type="text/stache" id="demo-stache">
		<can-import 
			from="can-stache-animate/demos/events-animations" 
			{^value.animations}="*animations" 
		/>

	<div class="demo-wrap">
		{{#if isHidden}}<p>hidden</p>{{else}}<p>visible</p>{{/if}}
		<div class="demo demo-2 {{#if isHidden}}hidden{{/if}}"
				 (. fadein)="*animations.customFadeIn"
				 (. customfadeinbefore)="handleAnimationBefore"
				 (. customfadeinrunning)="handleAnimationRunning"
				 (. customfadeincomplete)="handleAnimationComplete"
				 ($inserted)="handleInserted" />
	</div>

</script>
<script src="../../node_modules/steal/steal.js" main="@empty">
	import $ from 'jquery';
	import 'can-view-import';
	import stache from 'can-stache';
	import canStacheBindings from 'can-stache-bindings';
	import DefineMap from 'can-define/map/';
	import "can-util/dom/events/inserted/inserted"; 

	var TestMap = DefineMap.extend({
				isHidden:{
					value: true
				},
				handleInserted(){
					console.log("handleInserted");
				},
				handleAnimationBefore(vm, el, ev, data){
					console.log("handleAnimationBefore", data);
				},
				handleAnimationRunning(vm, el, ev, data){
					console.log("handleAnimationRunning", data);
				},
				handleAnimationComplete(vm, el, ev, data){
					console.log("handleAnimationAfter", data);
					this.isHidden = false;
				}
			}),
			map = new TestMap({}),
			frag = stache.from("demo-stache")(map);

	document.body.appendChild(frag);


	setTimeout(() => {
		console.log("dispatch event");
		map.dispatch("fadein");
	}, 1000)

</script>
